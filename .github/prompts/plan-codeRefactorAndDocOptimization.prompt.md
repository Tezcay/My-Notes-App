# Plan: ç¬”è®°åº”ç”¨ä»£ç é‡æ„ä¸æ–‡æ¡£ä¼˜åŒ–

åŸºäºç°æœ‰ä»£ç åº“ï¼ˆscript.js 1421è¡Œ + style.css 1083è¡Œï¼‰è¿›è¡Œæ¨¡å—åŒ–é‡æ„ï¼Œé‡‡ç”¨ç”¨æˆ·æä¾›çš„A-Fæ³¨é‡Šè§„èŒƒï¼Œåˆ é™¤140è¡ŒåºŸä»£ç ï¼Œå°†ä¸»æ–‡ä»¶ç²¾ç®€60%ï¼Œå¹¶å®Œå–„READMEæ–‡æ¡£ç»“æ„ã€‚

## Steps

1. **æ¸…ç†åºŸä»£ç ** - åˆ é™¤ [script.js](scripts/script.js) ä¸­4å¤„å·²æ³¨é‡Šçš„æ—§ä»£ç ï¼ˆ1-29è¡Œæ¨¡æ‹Ÿæ•°æ®ã€368-395è¡Œæ—§å¯¼èˆªé€»è¾‘ã€641-665è¡Œpromptå¼¹çª—ã€1037-1080è¡Œé¢„è§ˆæŒ‰é’®ï¼‰ï¼Œå‡å°‘çº¦140è¡Œå†—ä½™ä»£ç ï¼Œ å¯¹äºæŸäº›å¯èƒ½æœ‰ç”¨çš„ä»£ç ç‰‡æ®µï¼Œå…ˆå¤‡ä»½åˆ°å•ç‹¬æ–‡ä»¶ `deprecated_code_backup.js`

2. **é‡æ„JavaScriptæ¨¡å—** - æŒ‰ç…§A-Fæ¨¡å—æ–¹æ¡ˆé‡æ–°ç»„ç»‡ [script.js](scripts/script.js)ï¼šA.æ•°æ®å±‚ğŸ“¦ã€B.å·¥å…·å‡½æ•°ğŸ”§ã€C.UIæ¸²æŸ“ğŸ¨ã€D.äº‹ä»¶å¤„ç†âš¡ã€E.ç¼–è¾‘å™¨é›†æˆğŸ“ã€F.é«˜çº§åŠŸèƒ½âœ¨ï¼Œæ·»åŠ å¤§å†™å­—æ¯åˆ†éš”æ³¨é‡Šå’Œemojiæ ‡è®°ï¼Œæå– `formatTime()`ã€`highlightKeyword()` ç­‰å·¥å…·å‡½æ•°ï¼Œ æ¯ä¸ªæ¨¡å—ä¹‹é—´é—´éš”åˆ†æ˜ï¼Œå¹¶ä¸ºæ—¥åçš„ä¸ºå®Œå–„çš„åŠŸèƒ½æˆ–æ›´å¤šæ–°åŠŸèƒ½ç•™ä¸‹æ³¨é‡Šé€»è¾‘ç©ºé—´

3. **ä¼˜åŒ–CSSä»£ç åˆ†ç»„** - é‡æ–°ç»„ç»‡ [style.css](styles/style.css)ï¼Œæ·»åŠ æ¸…æ™°çš„åˆ†å—æ³¨é‡Šï¼šåŸºç¡€æ ·å¼ï¼ˆå˜é‡+é‡ç½®ï¼‰ã€å¸ƒå±€ç»“æ„ï¼ˆä¸‰æ +ä¾§è¾¹æ ï¼‰ã€ç»„ä»¶æ ·å¼ï¼ˆæŒ‰é’®+å¼¹çª—ï¼‰ã€ç¼–è¾‘å™¨å®šåˆ¶ï¼ˆEasyMDEè¦†ç›–ï¼‰ã€å“åº”å¼ä¸åŠ¨ç”»

4. **æ›´æ–°READMEæ–‡æ¡£** - æŒ‰ç…§ç”¨æˆ·æä¾›çš„å¤§çº²æ‰©å…… [README.md](README.md)ï¼Œå¯¹åŸæ–‡è¿›è¡Œè¯¦ç»†æ‰©å……å¹¶æ–°å¢ç« èŠ‚ï¼šæŠ€æœ¯æ¶æ„ï¼ˆæ•°æ®æµç¨‹å›¾+æ¨¡å—è¯´æ˜ï¼‰ã€ä»£ç ç»“æ„è¯¦è§£ï¼ˆJavaScript A-Fæ¨¡å—+CSSåˆ†ç»„ï¼‰ã€APIæ–‡æ¡£ï¼ˆæ ¸å¿ƒå‡½æ•°åˆ—è¡¨+æ•°æ®ç»“æ„+äº‹ä»¶ç›‘å¬ï¼‰ã€å¼€å‘æŒ‡å—ï¼ˆåŠŸèƒ½æ‰©å±•+è°ƒè¯•æŠ€å·§ï¼‰

5. **ç»Ÿä¸€ä»£ç è§„èŒƒ** - ä¸è¦æ”¹å˜æºä»£ç ï¼Œåªæ”¹å˜æ³¨é‡Šï¼Œä¸ºå…³é”®é€»è¾‘æ·»åŠ  ğŸ”’âš ï¸ğŸ’¡ emojiæ³¨é‡Šã€ç¡®ä¿æ‰€æœ‰å‡½æ•°æœ‰æ ‡å‡†æ³¨é‡Šå¤´ï¼ˆåŠŸèƒ½è¯´æ˜+å‚æ•°+è¿”å›å€¼ï¼‰ã€éªŒè¯åŠŸèƒ½å®Œæ•´æ€§

## Further Considerations

1. **æ¨¡å—åŒ–æ‹†åˆ†æ–¹æ¡ˆ** - å½“å‰è®¡åˆ’ä¿æŒå•æ–‡ä»¶ç»“æ„ä»¥ç¬¦åˆè¯¾ç¨‹è¦æ±‚ï¼Œæ˜¯å¦éœ€è¦åˆ›å»º `modules/` ç›®å½•å°†ä»£ç æ‹†åˆ†ä¸ºç‹¬ç«‹çš„ ES6 æ¨¡å—æ–‡ä»¶ï¼Ÿè¿™å°†è¿›ä¸€æ­¥æå‡å¯ç»´æŠ¤æ€§ä½†éœ€è¦æ„å»ºå·¥å…·æ”¯æŒ ->  å¦‚æœè¿™æ ·åšæ˜¯å¦è¿èƒŒäº†è¯¾ç¨‹â€œå•æ–‡ä»¶â€è¦æ±‚ï¼Ÿéœ€è¦ç¡®è®¤ï¼Œè¯¾ç¨‹ä¸¥æ ¼è¦æ±‚æŠ€æœ¯è¦æ±‚ï¼šä¸å…è®¸ä½¿ç”¨ä»»ä½•ç°æœ‰çš„CSSæ¡†æ¶ã€‚ä¸å…è®¸ä½¿ç”¨jQueryç­‰JavaScriptå·¥å…·åº“
æˆ–Vue.jsã€React ç­‰ç•Œé¢åº“ã€‚å¿…é¡»ä½¿ç”¨åŸç”ŸDOMAPIå®ç°ç›¸åº”æ“ä½œã€‚å¯ä»¥å‚è€ƒå’Œå€Ÿé‰´ç°æœ‰æ¡†
æ¶å’Œåº“çš„ä»£ç ç‰‡æ®µï¼Œæ¨èè‡ªè¡Œå°è£…å¸¸ç”¨åŠŸèƒ½ã€‚
æŸäº›åŠŸèƒ½å¦‚è°ƒç”¨ç¬¬ä¸‰æ–¹åº“å®ç°ï¼Œå°†æ¯”è‡ªè¡Œå®ç°æŠ˜ç®—çš„å·¥ä½œé‡å°ã€‚ç¬¬ä¸‰æ–¹åº“è¯·ä»CNDå¯¼å…¥ï¼Œ
ä¸è¦åŒ…å«åœ¨æœ€åå‘å¸ƒçš„æºä»£ç ä¸­ã€‚ -> ä¸æ‹†åˆ†

2. **æ€§èƒ½ä¼˜åŒ–å»ºè®®** - æ˜¯å¦éœ€è¦åŒæ­¥æ·»åŠ è™šæ‹Ÿæ»šåŠ¨ï¼ˆé’ˆå¯¹100+ç¬”è®°åœºæ™¯ï¼‰ã€å›¾ç‰‡å‹ç¼©é€»è¾‘ï¼ˆé¿å…LocalStorage 5MBé™åˆ¶ï¼‰ã€é˜²æŠ–èŠ‚æµä¼˜åŒ–ï¼ˆæœç´¢å’Œè‡ªåŠ¨ä¿å­˜ï¼‰ï¼Ÿ -> éœ€è¦

3. **æ–‡æ¡£è¯¦ç»†ç¨‹åº¦** - READMEä¸­çš„"APIæ–‡æ¡£"ç« èŠ‚ï¼Œæ˜¯å¦éœ€è¦ä¸ºæ¯ä¸ªæ ¸å¿ƒå‡½æ•°ç”Ÿæˆå®Œæ•´çš„JSDocé£æ ¼æ–‡æ¡£ï¼ŒåŒ…æ‹¬ä½¿ç”¨ç¤ºä¾‹å’Œè¿”å›å€¼è¯´æ˜ï¼Ÿ -> éœ€è¦

---

## é™„å½•ï¼šä»£ç åˆ†æè¯¦æƒ…

### JavaScript æ¨¡å—åˆ’åˆ†è¯¦è§£

#### æ¨¡å—Aï¼šæ•°æ®å±‚ ğŸ“¦
- A1. æ•°æ®ç»“æ„å®šä¹‰
  - `notes` æ•°ç»„ï¼ˆç¬”è®°æ•°æ®ï¼‰
  - `categories` æ•°ç»„ï¼ˆåˆ†ç±»æ•°æ®ï¼‰
  - é»˜è®¤æ•°æ®æ¨¡æ¿
- A2. LocalStorage æ“ä½œ
  - `saveData()` - æ•°æ®æŒä¹…åŒ–
  - `loadData()` - æ•°æ®è¯»å–
  - `initData()` - æ•°æ®åˆå§‹åŒ–
- A3. æ•°æ®éªŒè¯
  - ç±»å‹æ£€æŸ¥
  - å®Œæ•´æ€§éªŒè¯

#### æ¨¡å—Bï¼šå·¥å…·å‡½æ•° ğŸ”§
- B1. æ—¶é—´å¤„ç†
  - `formatTime(timestamp)` - æ—¶é—´æ ¼å¼åŒ–
- B2. æ–‡æœ¬å¤„ç†
  - `highlightKeyword(text, keyword)` - æœç´¢é«˜äº®
  - `escapeHtml(text)` - HTMLè½¬ä¹‰
- B3. DOMè¾…åŠ©
  - `createElement(tag, className, content)` - å…ƒç´ åˆ›å»º
  - `findElement(selector)` - å®‰å…¨æŸ¥è¯¢

#### æ¨¡å—Cï¼šUIæ¸²æŸ“ ğŸ¨
- C1. ä¾§è¾¹æ æ¸²æŸ“
  - `renderCategories()` - æ–‡ä»¶å¤¹åˆ—è¡¨
  - `renderFolderList()` - åŠ¨æ€æ–‡ä»¶å¤¹
- C2. ç¬”è®°åˆ—è¡¨æ¸²æŸ“
  - `renderNoteList()` - ä¸»åˆ—è¡¨æ¸²æŸ“
  - `renderEmptyState()` - ç©ºçŠ¶æ€æ˜¾ç¤º
- C3. ç¼–è¾‘å™¨åŠ è½½
  - `loadNote(id)` - åŠ è½½ç¬”è®°åˆ°ç¼–è¾‘å™¨
  - `clearEditor()` - æ¸…ç©ºç¼–è¾‘å™¨

#### æ¨¡å—Dï¼šäº‹ä»¶å¤„ç† âš¡
- D1. å¯¼èˆªåˆ‡æ¢
  - `handleCategoryClick(e)` - åˆ†ç±»åˆ‡æ¢
  - `handleFolderToggle()` - æ–‡ä»¶å¤¹å±•å¼€
- D2. ç¬”è®°æ“ä½œ
  - `handleNoteClick(e)` - ç¬”è®°é€‰æ‹©
  - `handleNoteDelete()` - ç¬”è®°åˆ é™¤
  - `handleNoteSave()` - è‡ªåŠ¨ä¿å­˜
- D3. æ‹–æ‹½åŠŸèƒ½
  - `handleDragStart(e)` - å¼€å§‹æ‹–æ‹½
  - `handleDrop(e)` - æ‹–æ”¾å¤„ç†
- D4. æœç´¢æ’åº
  - `handleSearch(e)` - æœç´¢è¿‡æ»¤
  - `handleSortChange()` - æ’åºåˆ‡æ¢

#### æ¨¡å—Eï¼šç¼–è¾‘å™¨é›†æˆ ğŸ“
- E1. EasyMDE åˆå§‹åŒ–
  - `initEasyMDE()` - ç¼–è¾‘å™¨åˆ›å»º
  - `setupToolbar()` - å·¥å…·æ é…ç½®
- E2. è‡ªå®šä¹‰åŠŸèƒ½
  - `addCustomButtons()` - è‡ªå®šä¹‰æŒ‰é’®
  - `handleImageUpload()` - å›¾ç‰‡å¤„ç†
- E3. ç¼–è¾‘å™¨äº‹ä»¶
  - `onEditorChange()` - å†…å®¹å˜åŒ–
  - `onEditorBlur()` - å¤±ç„¦ä¿å­˜

#### æ¨¡å—Fï¼šé«˜çº§åŠŸèƒ½ âœ¨
- F1. ä¸»é¢˜åˆ‡æ¢
  - `toggleTheme()` - åˆ‡æ¢æ·±è‰²/æµ…è‰²
  - `loadThemePreference()` - åŠ è½½ä¸»é¢˜åå¥½
- F2. å¼¹çª—ç³»ç»Ÿ
  - `showModal(title, desc)` - æ˜¾ç¤ºå¼¹çª—
  - `hideModal()` - å…³é—­å¼¹çª—
- F3. å³é”®èœå•
  - `showContextMenu(x, y)` - æ˜¾ç¤ºèœå•
  - `handleContextMenuAction()` - èœå•æ“ä½œ
- F4. ç§å¯†ç¬”è®°
  - `lockNote()` - åŠ å¯†ç¬”è®°
  - `unlockNote()` - è§£å¯†éªŒè¯

### CSS ä»£ç ç»„ç»‡ç»“æ„

#### 1. åŸºç¡€æ ·å¼ (1-80è¡Œ)
```css
/* === ä¸»é¢˜å˜é‡ === */
:root { --bg-primary, --text-primary... }
[data-theme="dark"] { ... }

/* === å…¨å±€é‡ç½® === */
body, ul, li { ... }
```

#### 2. å¸ƒå±€ç»“æ„ (81-440è¡Œ)
```css
/* === æ•´ä½“å®¹å™¨ === */
.app { display: flex; }

/* === ä¾§è¾¹æ  === */
.sidebar { width: 250px; }
.nav-item { ... }
.folder-container { ... }

/* === ç¬”è®°åˆ—è¡¨ === */
.list-view { width: 320px; }
.note-item { ... }

/* === ç¼–è¾‘å™¨åŒºåŸŸ === */
.editor-view { flex: 1; }
.toolbar { ... }
```

#### 3. ç»„ä»¶æ ·å¼ (441-680è¡Œ)
```css
/* === æŒ‰é’®ç»„ä»¶ === */
.add-circle-btn { ... }
.tool-btn { ... }

/* === è¾“å…¥æ¡† === */
.search-box input { ... }
#note-title { ... }

/* === å¼¹çª— === */
.modal-overlay { ... }
.modal-box { ... }

/* === å³é”®èœå• === */
.context-menu { ... }
```

#### 4. ç¼–è¾‘å™¨å®šåˆ¶ (681-880è¡Œ)
```css
/* === EasyMDE è¦†ç›– === */
.editor-toolbar { ... }
.CodeMirror { ... }

/* === é¢„è§ˆåŒºåŸŸ === */
#note-preview-area { ... }
```

#### 5. å“åº”å¼ä¸åŠ¨ç”» (881-1083è¡Œ)
```css
/* === åª’ä½“æŸ¥è¯¢ === */
@media (max-width: 768px) { ... }

/* === è¿‡æ¸¡åŠ¨ç”» === */
@keyframes modalPop { ... }
@keyframes fadeIn { ... }

/* === æ·±è‰²æ¨¡å¼ === */
[data-theme="dark"] .CodeMirror { ... }
```

### æ•°æ®ç»“æ„è¯¦ç»†å®šä¹‰

#### ç¬”è®°å¯¹è±¡ (Note)
```javascript
{
  id: String,           // å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆæ—¶é—´æˆ³å­—ç¬¦ä¸²ï¼‰
  title: String,        // ç¬”è®°æ ‡é¢˜
  content: String,      // Markdownå†…å®¹
  updateTime: Number,   // æœ€åç¼–è¾‘æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰
  categoryId: String,   // æ‰€å±åˆ†ç±»ID
  isPrivate: Boolean,   // æ˜¯å¦ç§å¯†ï¼ˆå¯é€‰ï¼‰
  password: String      // åŠ å¯†å¯†ç ï¼ˆå¯é€‰ï¼‰
}
```

#### åˆ†ç±»å¯¹è±¡ (Category)
```javascript
{
  id: String,          // åˆ†ç±»IDï¼ˆå¦‚ "folder-1234567890"ï¼‰
  name: String         // åˆ†ç±»åç§°
}
```

#### å…¨å±€çŠ¶æ€å˜é‡
```javascript
let currentCategoryId = 'all';        // å½“å‰é€‰ä¸­çš„åˆ†ç±»
let currentNoteId = null;             // å½“å‰ç¼–è¾‘çš„ç¬”è®°ID
let currentSearchKeyword = '';        // æœç´¢å…³é”®è¯
let currentSortMode = 'time-desc';    // æ’åºæ¨¡å¼
let isLoadingNote = false;            // é˜²é‡å¤åŠ è½½æ ‡å¿—
```

### æ ¸å¿ƒå‡½æ•° API å‚è€ƒ

#### æ•°æ®æ“ä½œ API
- `saveData()` - ä¿å­˜æ‰€æœ‰æ•°æ®åˆ° LocalStorage
- `loadData()` - ä» LocalStorage åŠ è½½æ•°æ®
- `initData()` - åˆå§‹åŒ–é»˜è®¤æ•°æ®

#### æ¸²æŸ“ API
- `renderCategories()` - æ¸²æŸ“å·¦ä¾§æ–‡ä»¶å¤¹åˆ—è¡¨
- `renderNoteList()` - æ¸²æŸ“ä¸­é—´ç¬”è®°åˆ—è¡¨
- `loadNote(noteId)` - åŠ è½½æŒ‡å®šç¬”è®°åˆ°ç¼–è¾‘å™¨

#### ç¬”è®°æ“ä½œ API
- `createNote()` - åˆ›å»ºæ–°ç¬”è®°
- `updateNote(id, updates)` - æ›´æ–°ç¬”è®°å†…å®¹
- `deleteNote(id)` - åˆ é™¤ç¬”è®°ï¼ˆç§»è‡³å›æ”¶ç«™ï¼‰
- `moveNote(noteId, categoryId)` - ç§»åŠ¨ç¬”è®°åˆ°æŒ‡å®šåˆ†ç±»

#### å·¥å…·å‡½æ•° API
- `formatTime(timestamp)` - æ ¼å¼åŒ–æ—¶é—´æˆ³ä¸ºå¯è¯»å­—ç¬¦ä¸²
- `highlightKeyword(text, keyword)` - åœ¨æ–‡æœ¬ä¸­é«˜äº®å…³é”®è¯
- `showModal(title, desc, callback)` - æ˜¾ç¤ºè‡ªå®šä¹‰å¼¹çª—

### äº‹ä»¶ç›‘å¬åˆ—è¡¨

#### é¡µé¢åŠ è½½äº‹ä»¶
- `DOMContentLoaded` â†’ åˆå§‹åŒ–åº”ç”¨

#### å¯¼èˆªäº‹ä»¶
- `.nav-item click` â†’ åˆ‡æ¢åˆ†ç±»
- `.folder-header click` â†’ å±•å¼€/æŠ˜å æ–‡ä»¶å¤¹
- `#add-folder-btn click` â†’ æ–°å»ºæ–‡ä»¶å¤¹

#### ç¬”è®°äº‹ä»¶
- `.add-circle-btn click` â†’ æ–°å»ºç¬”è®°
- `.note-item click` â†’ é€‰æ‹©ç¬”è®°
- `.delete-btn click` â†’ åˆ é™¤ç¬”è®°

#### ç¼–è¾‘å™¨äº‹ä»¶
- `#note-title input` â†’ æ ‡é¢˜è‡ªåŠ¨ä¿å­˜
- `easyMDE.codemirror.on('change')` â†’ å†…å®¹è‡ªåŠ¨ä¿å­˜

#### æœç´¢æ’åºäº‹ä»¶
- `.search-box input` â†’ æœç´¢è¿‡æ»¤
- `.sort-action click` â†’ åˆ‡æ¢æ’åºæ–¹å¼

#### æ‹–æ‹½äº‹ä»¶
- `.note-item dragstart` â†’ å¼€å§‹æ‹–æ‹½
- `.nav-item dragover` â†’ æ‹–æ‹½æ‚¬åœ
- `.nav-item drop` â†’ æ‹–æ”¾å®Œæˆ

#### å³é”®èœå•äº‹ä»¶
- `.sub-item contextmenu` â†’ æ˜¾ç¤ºå³é”®èœå•
- `#ctx-rename click` â†’ é‡å‘½åæ–‡ä»¶å¤¹
- `#ctx-delete click` â†’ åˆ é™¤æ–‡ä»¶å¤¹

#### ä¸»é¢˜åˆ‡æ¢äº‹ä»¶
- `#theme-toggle-btn click` â†’ åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼

---

è¿™æ˜¯å®Œæ•´çš„é‡æ„è®¡åˆ’å’ŒæŠ€æœ¯æ–‡æ¡£ï¼Œå¯æ ¹æ®éœ€è¦è¿›ä¸€æ­¥ç»†åŒ–æˆ–è°ƒæ•´ã€‚
